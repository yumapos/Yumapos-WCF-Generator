//------------------------------------------------------------------------------
// <auto-generated>
//	 This code was generated from a template.
//
//	 Manual changes to this file may cause unexpected behavior in your application.
//	 Manual changes to this file will be overwritten if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Linq;
using System.ServiceModel;
using YumaPos.Shared.Terminal.Infrastructure;
using YumaPos.FrontEnd.Infrastructure.CommandProcessing;
using YumaPos.Shared.Exceptions;
using YumaPos.Shared.API.Faults;

namespace TestWcfClientGenerator
{
	public sealed class UnauthorizeErrorApiDecorator : TestWcfClientGenerator.IWcfServiceApi
	{
		private readonly TestWcfClientGenerator.IWcfServiceApi _actor;
		#region Properties
		public ExecutionContext ExecutionContext
		{
			get { return _actor.ExecutionContext; }
			set { _actor.ExecutionContext = value; }
		}
		#endregion
		public UnauthorizeErrorApiDecorator(TestWcfClientGenerator.IWcfServiceApi actor)
		{
			if (actor == null) throw new ArgumentNullException(nameof(actor));
			_actor = actor;
		}
		public async System.Threading.Tasks.Task<TestDecoratorGeneration.ResponseDto> AddItem(System.Guid id, string name)
		{
			try
			{
				return await _actor.AddItem(id, name);
			}
			catch (FaultException<UnauthorizedFault>)
			{
				throw new UnauthorizedException();
			}
			catch (FaultException ex)
			{
				if (ex.Code.Name.Equals("401")) throw new UnauthorizedException();
				throw;
			}
		}

		public async System.Threading.Tasks.Task<TestDecoratorGeneration.ItemDto> GetItems()
		{
			try
			{
				return await _actor.GetItems();
			}
			catch (FaultException<UnauthorizedFault>)
			{
				throw new UnauthorizedException();
			}
			catch (FaultException ex)
			{
				if (ex.Code.Name.Equals("401")) throw new UnauthorizedException();
				throw;
			}
		}

	}
}
